(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"94Vx":function(e,t,a){"use strict";var r=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=r(a("kLXV"));a("IzEo");var i=r(a("bx4M"));a("14J3");var u=r(a("BMrR"));a("/zsF");var o=r(a("PArb"));a("+L6B");var d=r(a("2/Rp"));a("jCWc");var c=r(a("kPKH"));a("5NDa");var f=r(a("5rEg")),s=r(a("lwsE")),p=r(a("W8MJ")),m=r(a("a1gu")),h=r(a("Nsbk")),v=r(a("7W2i"));a("OaEy");var g=r(a("2fM7"));a("y8nQ");var y,E,I,k=r(a("Vl3Y")),D=l(a("q1tI")),C=a("MuoO"),b=r(a("+kNj")),w=r(a("zHco")),A=r(a("TztH")),q=b.default.Description,M=k.default.Item,N=g.default.Option,z={"01":"\u4e00","02":"\u4e8c","03":"\u4e09","04":"\u56db","05":"\u4e94","06":"\u516d","07":"\u65e5"},B=(y=(0,C.connect)(function(e){var t=e.report,a=e.airport,r=e.field,l=e.loading;return{detail:t.target,editData:t.editData,fields:r.current,airports:a.list,loading:l.effects["report/detail"]||l.effects["airport/queryAll"]||l.effects["field/queryCurrent"],reporting:l.effects["report/inputData"]||l.effects["report/editData"]}}),E=k.default.create(),y(I=E(I=function(e){function t(e){var a;return(0,s.default)(this,t),a=(0,m.default)(this,(0,h.default)(t).call(this,e)),a.handleInput=function(){var e=a.props,t=e.form.validateFields,r=e.editData,l=e.dispatch,n=e.detail,i=a.state.airportId;t(function(e,t){if(!e){var a={reportId:n.id,airportId:r?r.airportId:i},u=[];r?Object.keys(t).forEach(function(e){var a=e.split("_");u.push({id:parseInt(a[1],10),fieldId:parseInt(a[0],10),value:t[e]})}):Object.keys(t).forEach(function(e){u.push({fieldId:e,value:t[e]})}),a.values=u,l({type:r?"report/editData":"report/inputData",payload:a})}})},a.renderFormItem=function(){var e=a.props,t=e.detail.fields,r=e.fields,l=e.editData,n=e.form.getFieldDecorator;return l&&r.length?Object.keys(l.origin).filter(function(e){return"addDay"!==e}).map(function(e){var t,a=r.find(function(t){return t.id===parseInt(e,10)}),i=l.origin[e],u={initialValue:i.value,rules:[{required:a.required,message:"\u5fc5\u586b\u9879"}]};return t="Integers"===a.type||"Float"===a.type?n("".concat(a.id,"_").concat(i.id),u)(D.default.createElement(A.default,{type:"Integers"===a.type?"int":""})):n("".concat(a.id,"_").concat(i.id),u)(D.default.createElement(f.default,null)),D.default.createElement(c.default,{xs:24,sm:12,md:8,key:a.id},D.default.createElement(M,{label:a.name},t))}):t.map(function(e){var t,a={rules:[{required:e.required,message:"\u5fc5\u586b\u9879"}]};return t="Integers"===e.type||"Float"===e.type?n("".concat(e.id),a)(D.default.createElement(A.default,{type:"Integers"===e.type?"int":""})):n("".concat(e.id),a)(D.default.createElement(f.default,null)),D.default.createElement(c.default,{xs:24,sm:12,md:8,key:e.id},D.default.createElement(M,{label:e.name},t))})},a.handleGo2ChangeAirport=function(){a.setState({showAirport:!0})},a.handleAirportChange=function(e){a.setState({showAirport:!1,airportId:e})},a.state={showAirport:!e.editData,airportId:e.editData?e.editData.airportId:0},a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.match,r=e.editData,l=e.fields,n=e.airports,i=a.params.reportId;t({type:"report/detail",payload:parseInt(i,10)}),n.length||t({type:"airport/queryAll"}),r&&!l.length&&t({type:"field/queryCurrent"})}},{key:"render",value:function(){var e=this.props,t=e.detail,a=e.loading,r=e.airports,l=e.reporting,c=this.state,f=c.airportId,s=c.showAirport,p=r.length&&f&&r.find(function(e){return e.id===f}).name,m="";if(t.deadline){var h=t.deadline.split("-"),v=t.type;"Daily"===v&&(m="\u6bcf\u5929".concat(h[3],"\u70b9").concat(h[4],"\u5206\u524d")),"Weekly"===v&&(m="\u6bcf\u5468".concat(z[h[1]]).concat(h[3],"\u70b9").concat(h[4],"\u5206\u524d")),"Monthly"===v&&(m="\u6bcf\u6708".concat(h[2],"\u65e5").concat(h[3],"\u70b9").concat(h[4],"\u5206\u524d"))}return D.default.createElement(w.default,null,D.default.createElement(i.default,{loading:a,bordered:!1},D.default.createElement(b.default,{size:"large",title:"\u57fa\u672c\u4fe1\u606f",style:{marginBottom:32}},D.default.createElement(q,{term:"\u540d\u79f0"},t.name),D.default.createElement(q,{term:"\u586b\u62a5\u671f\u9650"},m),D.default.createElement(q,{term:"\u586b\u62a5\u673a\u573a"},p||"\u672a\u9009\u62e9"," ",D.default.createElement(d.default,{size:"small",onClick:this.handleGo2ChangeAirport},"\u5207\u6362"))),D.default.createElement(o.default,{style:{marginBottom:32}}),t.fields&&D.default.createElement("div",null,D.default.createElement(k.default,null,D.default.createElement(u.default,{gutter:16},this.renderFormItem()),D.default.createElement("div",{style:{textAlign:"right"}},D.default.createElement(d.default,{style:{width:150,margin:"0 auto"},loading:l,type:"primary",onClick:this.handleInput},"\u63d0\u4ea4"))))),D.default.createElement(n.default,{visible:s,closable:!1,maskClosable:!1,footer:null},D.default.createElement(g.default,{style:{width:"100%"},placeholder:"\u8bf7\u5148\u9009\u62e9\u673a\u573a",size:"large",onChange:this.handleAirportChange},r.map(function(e){return D.default.createElement(N,{key:e.id,value:e.id},e.name)}))))}}]),t}(D.Component))||I)||I),O=B;t.default=O},TztH:function(e,t,a){"use strict";var r=a("284h"),l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5Dmo");var n=l(a("3S7+"));a("5NDa");var i=l(a("5rEg")),u=l(a("lwsE")),o=l(a("W8MJ")),d=l(a("a1gu")),c=l(a("Nsbk")),f=l(a("7W2i")),s=r(a("q1tI"));function p(e){var t="".concat(e),a=t.split("."),r="-"===a[0].charAt(0)?"-":"",l=r?a[0].slice(1):a[0],n="";while(l.length>3)n=",".concat(l.slice(-3)).concat(n),l=l.slice(0,l.length-3);return l&&(n=l+n),"".concat(r).concat(n).concat(a[1]?".".concat(a[1]):"")}var m=function(e){function t(e){var a;return(0,u.default)(this,t),a=(0,d.default)(this,(0,c.default)(t).call(this,e)),a.onChange=function(e){var t=e.target.value,r=a.props.type,l=r&&"int"===r?/^-?(0|[1-9][0-9]*)(\.[0-9]*)?$/:/^-?(0|[1-9][0-9]*)?$/;if(!Number.isNaN(t)&&l.test(t)||""===t||"-"===t){a.setState({value:t});var n=a.props.onChange;n(t)}},a.onBlur=function(){var e=a.props,t=e.onBlur,r=e.onChange,l=a.state.value,n=l?"".concat(l):"";!n||"."!==n.charAt(l.length-1)&&"-"!==l||r(l.slice(0,-1)),t&&t()},a.state={value:e.value},a}return(0,f.default)(t,e),(0,o.default)(t,[{key:"componentWillReceiveProps",value:function(e){"value"in e&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this.state.value,t=this.props.type,a=e?s.default.createElement("span",{className:"numeric-input-title"},"-"!==e?p(e):"-"):"\u8f93\u5165\u6570\u5b57";return s.default.createElement(n.default,{trigger:["focus"],title:a,placement:"topLeft",overlayClassName:"numeric-input"},s.default.createElement(i.default,{value:e,onChange:this.onChange,onBlur:this.onBlur,placeholder:"int"===t?"\u8f93\u5165\u6574\u6570":"\u53ef\u8f93\u5165\u5c0f\u6570",maxLength:25}))}}]),t}(s.Component),h=m;t.default=h}}]);