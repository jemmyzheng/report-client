(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"7x8z":function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var d=l(a("bx4M"));a("2qtc");var r=l(a("kLXV"));a("5NDa");var u=l(a("5rEg"));a("g9YV");var i=l(a("wCAj"));a("+L6B");var o=l(a("2/Rp"));a("P2fV");var s=l(a("NJEC")),f=l(a("MVZn")),c=l(a("lwsE")),p=l(a("W8MJ")),m=l(a("a1gu")),h=l(a("Nsbk")),E=l(a("7W2i"));a("OaEy");var v=l(a("2fM7"));a("y8nQ");var g,y,I,w=l(a("Vl3Y")),k=n(a("q1tI")),b=a("MuoO"),M=l(a("wd/R")),C=l(a("zHco")),q=l(a("B9tY")),V=w.default.Item,D=v.default.Option,x=(g=(0,b.connect)(function(e){var t=e.user,a=e.dept,l=e.loading;return{users:t.list,depts:a.list,loading:l.models.user||l.effects["dept/queryAll"]}}),y=w.default.create(),g(I=y(I=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,m.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(n))),a.state={target:null,showModal:!1},a.handleLockEvent=function(e){var t=a.props.dispatch;t({type:"user/lock",payload:e})},a.handleEnableEvent=function(e){var t=a.props.dispatch;t({type:"user/unlock",payload:e})},a.handleDeleteEvent=function(e){var t=a.props.dispatch;t({type:"user/remove",payload:e})},a.renderDeptName=function(e){var t=a.props.depts,l=t.find(function(t){return t.id===e});return l?l.name:"not set"},a.handleAddItem=function(){a.setState({target:null,showModal:!0})},a.handleEditItem=function(e){a.setState({target:e,showModal:!0})},a.OKHandler=function(){var e=a.props,t=e.form.validateFields,l=e.dispatch,n=a.state.target;t(function(e,t){e||(l(n?{type:"user/edit",payload:(0,f.default)({},n,t)}:{type:"user/add",payload:(0,f.default)({},t)}),setTimeout(function(){a.setState({showModal:!1})},100))})},a}return(0,E.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.depts;t({type:"user/queryAllUser"}),a.length||t({type:"dept/queryAll"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.users,l=t.loading,n=t.locking,f=t.deteling,c=t.enabling,p=t.depts,m=t.form.getFieldDecorator,h=this.state,E=h.target,g=h.showModal,y=[{title:"\u7528\u6237Id",dataIndex:"userId"},{title:"\u7528\u6237\u540d",dataIndex:"name"},{title:"\u90e8\u95e8",dataIndex:"deptId",render:this.renderDeptName},{title:"\u624b\u673a\u53f7",dataIndex:"phone"},{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"addTime",render:function(e){return e&&k.default.createElement("span",null,(0,M.default)(e).format("YYYY-MM-DD"))}},{title:"\u64cd\u4f5c",render:function(t){return t&&"Manager"!==t.role&&k.default.createElement("span",null,k.default.createElement(k.Fragment,null,k.default.createElement("a",{style:{marginRight:"10px"},onClick:function(){e.handleEditItem(t)}},"\u7f16\u8f91"),"Valid"===t.state&&k.default.createElement(s.default,{title:"\u786e\u5b9a\u9501\u5b9a\u8be5\u7528\u6237 ?",onConfirm:function(){return e.handleLockEvent(t.userId)}},k.default.createElement("a",{loading:n},"\u9501\u5b9a"),"\xa0"),"Locked"===t.state&&k.default.createElement(s.default,{title:"\u786e\u5b9a\u89e3\u9501\u8be5\u7528\u6237 ?",onConfirm:function(){return e.handleEnableEvent(t.userId)}},k.default.createElement("a",{loading:c},"\u89e3\u9501"),"\xa0"),k.default.createElement(s.default,{title:"\u5220\u9664\u7528\u6237 ?",onConfirm:function(){return e.handleDeleteEvent(t.userId)}},k.default.createElement("a",{loading:f},"\u5220\u9664"))))}}];return k.default.createElement(C.default,{title:"\u7528\u6237\u7ba1\u7406"},k.default.createElement(d.default,{bordered:!1},k.default.createElement(o.default,{type:"dashed",onClick:this.handleAddItem,style:{width:"100%",marginBottom:8},icon:"plus"},"\u6dfb\u52a0\u65b0\u7528\u6237"),k.default.createElement("div",{className:q.default.tableList},k.default.createElement(i.default,{rowKey:"useId",loading:l,columns:y,dataSource:a})),k.default.createElement(r.default,{title:E?"\u7f16\u8f91\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",visible:g,destroyOnClose:!0,maskClosable:!1,onOk:this.OKHandler,onCancel:function(){e.setState({showModal:!1})}},k.default.createElement(w.default,null,k.default.createElement(V,{label:"\u540d\u79f0"},m("name",{initialValue:E?E.name:"",rules:[{required:!0,message:"\u5fc5\u586b\u9879"}]})(k.default.createElement(u.default,null))),k.default.createElement(V,{label:"\u624b\u673a\u53f7"},m("phone",{initialValue:E?E.phone:"",rules:[{required:!0,message:"\u5fc5\u586b\u9879"}]})(k.default.createElement(u.default,null))),k.default.createElement(V,{label:"\u90e8\u95e8"},m("deptId",{initialValue:E?E.deptId:"",rules:[{required:!0,message:"\u5fc5\u586b\u9879"}]})(k.default.createElement(v.default,null,p.filter(function(e){return 0!==e.id}).map(function(e){return k.default.createElement(D,{key:e.id,value:e.id},e.name)})))),k.default.createElement(V,{label:"\u767b\u5f55\u5bc6\u7801"},m("password",{initialValue:E?E.password:"",rules:[{required:!E,message:"\u5fc5\u586b\u9879"}]})(k.default.createElement(u.default,null)))))))}}]),t}(k.PureComponent))||I)||I),O=x;t.default=O}}]);